{"version":3,"sources":["js/component/FactorioLogin.js"],"names":["FactorioLogin","Component","constructor","props","state","config","factorioUsername","factorioPassword","factorioSavePw","componentDidMount","$","tooltip","componentWillUnmount","changeUsername","e","setState","target","value","changePassword","changeSavePw","checked","onSave","preventDefault","saveDisabled","username","savePw","password","loginController","getAuthToken","then","token","factorioAuthToken","prevPage","page","catch","error","message","errorText","render","bind"],"mappings":"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","file":"FactorioLogin.js","sourcesContent":["import React from \"react\";\nimport {inject, observer} from 'mobx-react'\nimport FactorioLoginController from '../controller/FactorioLoginController';\n\n@inject('config') @inject('state') @observer\nclass FactorioLogin extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            'username': this.props.config.factorioUsername,\n            'password': this.props.config.factorioPassword,\n            'savePw': this.props.config.factorioSavePw,\n            'saveDisabled': false,\n            'errorText': ''\n        }\n    }\n\n    componentDidMount(){\n        $('div.content [data-toggle=\"tooltip\"]').tooltip()\n    }\n    componentWillUnmount(){\n        $('div.content[data-toggle=\"tooltip\"]').tooltip('dispose')\n    }\n\n    changeUsername(e){\n        this.setState({'username': e.target.value});\n    }\n\n    changePassword(e){\n        this.setState({'password': e.target.value});\n    }\n\n    changeSavePw(e){\n        this.setState({'savePw': e.target.checked})\n    }\n\n    onSave(e){\n        e.preventDefault();\n        this.setState({saveDisabled: true});\n        this.props.config.factorioUsername = this.state.username;\n        this.props.config.factorioSavePw = this.state.savePw;\n        if(this.state.savePw) {\n            this.props.config.factorioPassword = this.state.password;\n        }else{\n            this.props.config.factorioPassword = '';\n            this.props.state.factorioPassword = this.state.password;\n        }\n        let loginController = new FactorioLoginController();\n        loginController.getAuthToken(this.state.username, this.state.password).then((token)=> {\n            this.props.config.factorioAuthToken = token;\n            let prevPage = this.props.state.prevPage;\n            this.props.state.prevPage = '';\n            this.props.state.page = prevPage;\n        }).catch((error)=>{\n            if(error.message === 'Unauthorized'){\n                this.setState({\n                    errorText: 'Username and password don\\'t match.'\n                })\n            }else{\n                this.setState({\n                    errorText: 'Something went wrong, please check your internet connection.'\n                })\n            }\n            this.setState({saveDisabled: false});\n        })\n    }\n\n    render(){\n        return <div>\n            <div className=\"row\">\n                <div className=\"col-6 m-auto\">\n                    <h4 className=\"text-center\">To download Mods and update Factorio to the latest version\n                        YAFMM needs your Login Data for Factorio</h4>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-6 m-auto\">\n                    <p className=\"text-danger text-center\">{this.state.errorText}</p>\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-6 m-auto\">\n                    <form onSubmit={this.onSave.bind(this)}>\n                        <div className=\"form-group\">\n                            <label>Username</label>\n                            <input className=\"form-control\" type=\"text\" value={this.state.username} onChange={this.changeUsername.bind(this)} placeholder=\"Username\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <label>Password</label>\n                            <input className=\"form-control\" type=\"password\" value={this.state.password} onChange={this.changePassword.bind(this)} placeholder=\"Password\" />\n                        </div>\n                        <div className=\"form-check\">\n                            <label className=\"custom-checkbox custom-control\">\n                                <input type=\"checkbox\" className=\"custom-control-input\" onChange={this.changeSavePw.bind(this)}\n                                       checked={this.state.savePw} />\n                                <span className=\"custom-control-indicator\" />\n                                <span className=\"custom-control-description\">Save Password\n                                    <i className=\"fa fa-lg fa-fw fa-question-circle-o\" data-toggle=\"tooltip\" data-placement=\"right\"\n                                       title=\"Your Password will only be stored locally\"/></span>\n                            </label>\n                        </div>\n                        <div className=\"form-group\">\n                            <button type=\"submit\" className=\"btn btn-outline-primary\" disabled={this.state.saveDisabled} >Save</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    }\n}\n\nexport default FactorioLogin;"]}