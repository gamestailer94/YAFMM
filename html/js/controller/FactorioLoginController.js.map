{"version":3,"sources":["js/controller/FactorioLoginController.js"],"names":["FactorioLoginController","loginEndpoint","getAuthToken","username","password","Promise","resolve","reject","$","ajax","type","url","data","api_version","require_game_ownership","done","token","fail","error","status","Error"],"mappings":";;;;;IAAqBA,uB,GAAN,MAAMA,uBAAN,CAA8B;AAAA;AAAA,aAEzCC,aAFyC,GAEzB,qCAFyB;AAAA;;AAIzCC,iBAAaC,QAAb,EAAuBC,QAAvB,EAAgC;AAC5B,eAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCC,cAAEC,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHC,qBAAK,KAAKV,aAFP;AAGHW,sBAAM;AACFT,8BAAUA,QADR;AAEFC,8BAAUA,QAFR;AAGFS,iCAAa,GAHX;AAIFC,4CAAwB;AAJtB;AAHH,aAAP,EASGC,IATH,CASSH,IAAD,IAAU;AACdN,wBAAQM,KAAKI,KAAb;AACH,aAXD,EAWGC,IAXH,CAWSL,IAAD,IAAU;AACd,oBAAIM,KAAJ;AACA,oBAAGN,KAAKO,MAAL,KAAgB,GAAnB,EAAuB;AACnBD,4BAAQ,IAAIE,KAAJ,CAAU,cAAV,CAAR;AACH,iBAFD,MAEK;AACDF,4BAAQ,IAAIE,KAAJ,CAAU,eAAV,CAAR;AACH;AACDb,uBAAOW,KAAP;AACH,aAnBD;AAoBH,SArBM,CAAP;AAsBH;AA3BwC,C;kBAAxBlB,uB","file":"FactorioLoginController.js","sourcesContent":["export default class FactorioLoginController {\n\n    loginEndpoint = 'https://auth.factorio.com/api-login';\n\n    getAuthToken(username, password){\n        return new Promise((resolve, reject) => {\n            $.ajax({\n                type: \"POST\",\n                url: this.loginEndpoint,\n                data: {\n                    username: username,\n                    password: password,\n                    api_version: '2',\n                    require_game_ownership: true\n                }\n            }).done((data) => {\n                resolve(data.token);\n            }).fail((data) => {\n                let error;\n                if(data.status === 401){\n                    error = new Error('Unauthorized');\n                }else{\n                    error = new Error('Unknown Error');\n                }\n                reject(error);\n            });\n        });\n    }\n}"]}