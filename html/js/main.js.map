{"version":3,"sources":["js/main.js"],"names":["app","require","remote","window","storage","loggerConfig","transports","File","filename","join","getAppPath","maxsize","json","maxFiles","tailable","zippedArchive","label","exitOnError","Logger","logger","oldError","error","err","console","log","profiles","loadProfiles","then","set","catch","render","activeProfile","document","getElementById"],"mappings":"AAAA;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;AA6BA;;;;AACA;;;;;;AA/BA,MAAM,EAAEA,GAAF,KAAUC,QAAQ,UAAR,EAAoBC,MAApC;;;AAGAC,OAAOC,OAAP,GAAiBH,QAAQ,kBAAR,CAAjB;AACA,MAAMI,eAAe;AACjBC,gBAAY,CACR,IAAI,kBAAOA,UAAP,CAAkBC,IAAtB,CAA2B;AACvBC,kBAAU,eAAKC,IAAL,CAAUT,IAAIU,UAAJ,EAAV,EAA2B,SAA3B,CADa;AAEvBC,iBAAS,IAFc;AAGvBC,cAAM,KAHiB;AAIvBC,kBAAU,CAJa;AAKvBC,kBAAU,IALa;AAMvBC,uBAAe,IANQ;AAOvBC,eAAO;AACP;AACA;AATuB,KAA3B,CADQ,CADK;AAcjBC,iBAAa;AAdI,CAArB;;AAiBA,kBAAOC,MAAP,CAAcb,YAAd;AACAF,OAAOgB,MAAP;AACAhB,OAAOgB,MAAP,CAAcC,QAAd,GAAyBjB,OAAOgB,MAAP,CAAcE,KAAvC;;AAEAlB,OAAOgB,MAAP,CAAcE,KAAd,GAAuBC,GAAD,IAAS;AAC3BC,YAAQC,GAAR,CAAYF,GAAZ;AACAnB,WAAOgB,MAAP,CAAcC,QAAd,CAAuBE,GAAvB;AACH,CAHD;;AAQA,IAAIG,WAAW,sBAAY,wBAAZ,CAAf;;AAEAA,SAASC,YAAT,GACKC,IADL,CACU,MAAI;AACN,4BAAa,MAAM;AACfxB,eAAOC,OAAP,CAAewB,GAAf,CAAmB,UAAnB,EAA+BH,QAA/B,EAAyCI,KAAzC,CAA+C1B,OAAOgB,MAAP,CAAcE,KAA7D;AACH,KAFD,EAEE,GAFF;AAGH,CALL,EAMKM,IANL,CAMU,MAAM;AACZ,uBAASG,MAAT,CACI;AAAA;AAAA,UAAU,SAASL,SAASM,aAA5B,EAA2C,UAAUN,QAArD;AACI;AADJ,KADJ,EAIMO,SAASC,cAAT,CAAwB,MAAxB,CAJN;AAKH,CAZD","file":"main.js","sourcesContent":["'use strict';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'mobx-react';\r\nimport logger from 'winston';\r\nimport path from 'path';\r\nconst { app } = require('electron').remote;\r\nimport {autorunAsync, observable} from \"mobx\";\r\n\r\nwindow.storage = require('electron-storage');\r\nconst loggerConfig = {\r\n    transports: [\r\n        new logger.transports.File({\r\n            filename: path.join(app.getAppPath(),'app.log'),\r\n            maxsize: 2048,\r\n            json: false,\r\n            maxFiles: 5,\r\n            tailable: true,\r\n            zippedArchive: true,\r\n            label: \"Render\",\r\n            // humanReadableUnhandledException: true,\r\n            // handleExceptions: true\r\n        })\r\n    ],\r\n    exitOnError: false\r\n};\r\n\r\nlogger.Logger(loggerConfig);\r\nwindow.logger = logger;\r\nwindow.logger.oldError = window.logger.error;\r\n\r\nwindow.logger.error = (err) => {\r\n    console.log(err);\r\n    window.logger.oldError(err);\r\n};\r\n\r\nimport Page from './js/tpl/page'\r\nimport Profiles from './js/model/Profiles'\r\n\r\nlet profiles = observable( new Profiles());\r\n\r\nprofiles.loadProfiles()\r\n    .then(()=>{\r\n        autorunAsync(() => {\r\n            window.storage.set('profiles', profiles).catch(window.logger.error);\r\n        },500);\r\n    })\r\n    .then(() => {\r\n    ReactDOM.render(\r\n        <Provider profile={profiles.activeProfile} profiles={profiles}>\r\n            <Page/>\r\n        </Provider>\r\n        , document.getElementById('root'));\r\n});\r\n"]}